<div
  class="card bg-base-100 w-1/3 mx-auto flex flex-col p-6 rounded-lg shadow-lg"
>
  <div class="card-title justify-center text-3xl text-primary">Sign up</div>
  <div class="card-body w-full">
    <!-- <form (ngSubmit)="register()" #registerForm="ngForm" class="flex flex-col gap-4 w-full"   >
            <input type="text" class="input w-full" name="email" [(ngModel)]="creds.email" placeholder="Email">
            <input type="text" class="input w-full" name="displayName" [(ngModel)]="creds.displayName" placeholder="Display name">
            <input type="password" class="input w-full" name="password" [(ngModel)]="creds.password" placeholder="Password">

            <div class="flex items-center justify-end gap-3">
                <button (click)="cancel()" class="btn">Cancel</button>
                <button class="btn btn-primary" type="submit">Register</button>
            </div>
        </form> -->

    <ul class="steps">
      <li class="step step-primary">Credentials</li>
      <li class="step" [class.step-primary]="currentStep() === 2">Profile</li>
    </ul>

    @if(currentStep() === 1){
    <form
      [formGroup]="credentialsForm"
      class="flex flex-col gap-4 w-full steps"
    >
      <!-- <label class="floating-label">
        <span>Email</span>
        <input
          type="text"
          class="input w-full"
          formControlName="email"
          placeholder="Email"
        />
      </label> -->
      <app-text-input class="mt-1.5" label="Email" formControlName="email" />
      <!-- <label class="floating-label text-left">
        <span>Display Name</span>
        <input
        [class.input-error]="registerForm.controls['displayName'].invalid 
        && registerForm.controls['displayName'].touched"
          type="text"
          class="input w-full"
          formControlName="displayName"
          placeholder="Display name">
        @if(registerForm.controls['displayName'].invalid 
        && registerForm.controls['displayName'].touched){
          <div class="validation-hint text-error text-xs">Display name is required</div>
        }
        </label> -->
      <app-text-input label="Display name" formControlName="displayName" />

      <!-- <label class="floating-label">
        <span>Password</span>
        <input
          type="password"
          class="input w-full"
          formControlName="password"
          placeholder="Password"
        />
      </label> -->
      <app-text-input
        label="Password"
        formControlName="password"
        type="password"
      />

      <!-- <label class="floating-label">
        <span>Confirm Password</span>
        <input
          type="password"
          class="input w-full"
          formControlName="confirmPassword"
          placeholder="Confirm Password"
        />
      </label> -->
      <app-text-input
        label="Confirm Password"
        formControlName="confirmPassword"
        type="password"
      />

      <div class="flex items-center justify-end gap-3">
        <button (click)="cancel()" class="btn">Cancel</button>
        <button
          [disabled]="!credentialsForm.valid"
          class="btn btn-primary"
          (click)="nextStep()"
          type="button"
        >
          Next
        </button>
      </div>
    </form>
    } @if(currentStep() === 2 ){
    <form [formGroup]="profileForm" class="flex flex-col w-full gap-4 steps">
      <div class="flex items-center gap-4">
        <div class="font-semibold">Gender:</div>
        <label class="flex gap-3 items-center">
          <span>Male</span>
          <input
            type="radio"
            formControlName="gender"
            value="male"
            class="radio readio-primary"
          />
        </label>
        <label class="flex gap-3 items-center">
          <span>Female</span>
          <input
            type="radio"
            formControlName="gender"
            value="female"
            class="radio readio-primary"
          />
        </label>
      </div>

      <app-text-input
        [maxDate]="getMaxDate()"
        type="date"
        label="Date of Birth"
        formControlName="dateOfBirth"
      />
      <app-text-input label="City" formControlName="city" />
      <app-text-input label="Country" formControlName="country" />

      <div class="flex items-center justify-end gap-3">
        <button (click)="prevStep()" class="btn">Back</button>
        <button
          [disabled]="!profileForm.valid"
          class="btn btn-primary"
          (click)="register()"
          type="button"
        >
          Register
        </button>
      </div>
    </form>
    }
  </div>
  <!-- <div class="flex flex-col items-start px-3 w-full mockup-code text-lg">
    <div>Creds value: {{ credentialsForm.value | json }}</div>
    <div>Creds status: {{ credentialsForm.status | json }}</div>
    <div>Profile value: {{ profileForm.value | json }}</div>
    <div>Profile status: {{ profileForm.status | json }}</div>
  </div> -->

  @if(validationErrors().length>0){
    <div class="mt-5 flex bg-gray-200 rounded-2xl w-1/3 p-3 mx-auto">
      <ul class="flex flex-col text-error space-y-1">
        @for(error of validationErrors(); track $index){
          <li>{{error}}</li>
        }
      </ul>
    </div>
  }
</div>
